(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userupdata"],{"1a08":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"updata-papg"},[s("div",{staticClass:"title"},[t._v("编辑歌单信息")]),s("div",{staticClass:"playlist-info"},[s("div",{staticClass:"palylist-name"},[t._v(" 歌单名： "),s("el-input",{model:{value:t.palylistName,callback:function(e){t.palylistName=e},expression:"palylistName"}})],1),s("div",{staticClass:"types"},[t._v(" 标签： "),t._l(t.playlistType,(function(e,a){return s("span",{key:a,staticClass:"basie-type"},[t._v(t._s(e))])})),s("span",{directives:[{name:"show",rawName:"v-show",value:t.playlistType,expression:"playlistType"}],staticClass:"add-type"},[t._v("添加标签")])],2),s("div",{staticClass:"desc"},[t._v(" 简介： "),s("el-input",{attrs:{type:"textarea",maxlength:"999","show-word-limit":"",rows:"5"},model:{value:t.playlistDesc,callback:function(e){t.playlistDesc=e},expression:"playlistDesc"}})],1),s("div",{staticClass:"save-button",on:{click:t.saveClick}},[t._v("保存")]),s("div",{staticClass:"cancel-button",on:{click:t.cancelClick}},[t._v("取消")])]),s("div",{staticClass:"cover"},[s("img",{attrs:{src:t.cover,alt:""}}),s("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?s("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):s("div",{staticClass:"updata-button"},[t._v("编辑封面")])])],1),s("user-updata-type-popover",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{currentSongType:t.playlistType}})],1)},i=[],r=(s("a4d3"),s("e01a"),s("c740"),s("a15b"),s("b0c0"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("96cf"),s("1da1")),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-updata-type-popover"},[s("div",[t._v("选择合适的标签，最多选择3个")]),t._l(t.typeLists,(function(e,a){return s("div",{key:a,staticClass:"center"},[s("div",{staticClass:"left"},[s("div",{staticClass:"text"},[t._v(t._s(e.type))])]),s("div",{staticClass:"right"},t._l(e.list,(function(e,a){return s("div",{key:a,staticClass:"item",on:{click:function(s){return t.handleSongTypeClick(e)}}},[s("div",{staticClass:"text"},[t._v(" "+t._s(e)+" ")])])})),0)])}))],2)},l=[],c=(s("a434"),{name:"UserUpdataTypePopover",data:function(){return{typeLists:this.$store.state.allTypeInfo}},methods:{handleSongTypeClick:function(t){var e=this.currentSongType.findIndex((function(e){return e==t}));-1==e?this.currentSongType.push(t):this.currentSongType.splice(e,1)}},props:{currentSongType:Array}}),o=c,p=(s("ea9a"),s("2877")),u=Object(p["a"])(o,n,l,!1,null,"77dbe3a6",null),d=u.exports,v=s("8137"),y={components:{userUpdataTypePopover:d},name:"UpDataPapg",data:function(){return{palylistName:"",playlistDesc:"",playlistType:[],imageUrl:""}},methods:{saveClick:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.playlistType.length>3)){e.next=3;break}return alert("标签大于3个"),e.abrupt("return");case 3:return console.log(t.playlistType),e.next=6,Object(v["ib"])(t.$route.params.id,t.palylistName,t.playlistDesc,t.playlistType.join(";"));case 6:t.getUserPlaylist(),t.$router.back();case 8:case"end":return e.stop()}}),e)})))()},cancelClick:function(){this.$router.back()},getUserPlaylist:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=JSON.parse(window.sessionStorage.getItem("currentUserInfo")),a=s.userId,e.next=4,Object(v["X"])(a);case 4:i=e.sent,console.log(i),t.$store.commit("setUserSonglistInfo",i),t.$store.commit("updataSonglist",a);case 8:case"end":return e.stop()}}),e)})))()},handleAvatarSuccess:function(t,e){this.imageUrl=URL.createObjectURL(e.raw),console.log(t)},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,s=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&s}},computed:{cover:function(){var t=this,e=this.$store.state.mySonglist.findIndex((function(e){return e.id==t.$route.params.id}));return this.$store.state.mySonglist[e].coverImgUrl}},created:function(){var t=this,e=this.$store.state.mySonglist.findIndex((function(e){return e.id==t.$route.params.id}));this.palylistName=this.$store.state.mySonglist[e].name,this.playlistDesc=this.$store.state.mySonglist[e].description,this.playlistType=this.$store.state.mySonglist[e].tags}},m=y,f=(s("2c89"),Object(p["a"])(m,a,i,!1,null,"1a562acb",null));e["default"]=f.exports},"2c89":function(t,e,s){"use strict";s("761e")},"42df":function(t,e,s){},"761e":function(t,e,s){},a15b:function(t,e,s){"use strict";var a=s("23e7"),i=s("44ad"),r=s("fc6a"),n=s("a640"),l=[].join,c=i!=Object,o=n("join",",");a({target:"Array",proto:!0,forced:c||!o},{join:function(t){return l.call(r(this),void 0===t?",":t)}})},ea9a:function(t,e,s){"use strict";s("42df")}}]);